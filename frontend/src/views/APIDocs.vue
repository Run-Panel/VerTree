<template>
  <div class="api-docs">
    <div class="page-header">
      <h1>{{ $t('docs.title', 'VerTree APIæ–‡æ¡£') }}</h1>
      <p class="page-description">
        VerTree æä¾›äº†å®Œæ•´çš„åº”ç”¨ç‰ˆæœ¬ç®¡ç† APIï¼Œæ”¯æŒç‰ˆæœ¬å‘å¸ƒã€æ›´æ–°æ£€æŸ¥ã€ç»Ÿè®¡åˆ†æç­‰åŠŸèƒ½ã€‚
      </p>
    </div>

    <el-card class="docs-card">
      <template #header>
        <div class="card-header">
          <h2>å¿«é€Ÿå¼€å§‹</h2>
        </div>
      </template>
      
      <div class="docs-content">
        <h3>APIåœ°å€</h3>
        <ul>
          <li><strong>å®¢æˆ·ç«¯API:</strong> <code>{{ clientApiBaseUrl }}</code></li>
          <li><strong>ç®¡ç†ç«¯API:</strong> <code>{{ adminApiBaseUrl }}</code></li>
        </ul>

        <h3>è®¤è¯æ–¹å¼</h3>
        <div class="auth-section">
          <h4>ğŸ”¹ å®¢æˆ·ç«¯APIè®¤è¯</h4>
          <p>ä½¿ç”¨åº”ç”¨IDå’ŒAPIå¯†é’¥è¿›è¡Œè®¤è¯ï¼š</p>
          <el-card class="code-card">
            <pre><code>Authorization: Bearer &lt;app_id&gt;:&lt;api_key&gt;</code></pre>
          </el-card>
          
          <h4>ğŸ”¹ ç®¡ç†ç«¯APIè®¤è¯</h4>
          <p>ä½¿ç”¨JWTä»¤ç‰Œè¿›è¡Œè®¤è¯ï¼š</p>
          <el-card class="code-card">
            <pre><code>Authorization: Bearer &lt;jwt_token&gt;</code></pre>
          </el-card>
        </div>

        <div class="security-note">
          <h4>ğŸ”’ å®‰å…¨éš”ç¦»</h4>
          <p>æ¯ä¸ªåº”ç”¨åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®ã€‚APIä¼šæ ¹æ®è®¤è¯ä¿¡æ¯è‡ªåŠ¨è¿‡æ»¤åº”ç”¨èŒƒå›´ï¼Œç¡®ä¿æ•°æ®å®‰å…¨ã€‚</p>
        </div>

        <h3>API Keyè·å–æ–¹å¼</h3>
        <ol>
          <li>ç™»å½•ç®¡ç†åå°ï¼Œè¿›å…¥ <router-link to="/applications">åº”ç”¨ç®¡ç†</router-link></li>
          <li>åˆ›å»ºæˆ–é€‰æ‹©ä¸€ä¸ªåº”ç”¨ï¼ˆè·å¾—App IDï¼‰</li>
          <li>åœ¨åº”ç”¨è¯¦æƒ…é¡µç‚¹å‡»"å¯†é’¥ç®¡ç†"æˆ–"API Keys"</li>
          <li>ç‚¹å‡»"åˆ›å»ºæ–°å¯†é’¥"ï¼Œè®¾ç½®å¯†é’¥åç§°</li>
          <li><strong>é‡è¦ï¼š</strong>è®¾ç½®å¯†é’¥æƒé™ï¼š<code>check_update</code>, <code>download</code>, <code>install</code></li>
          <li>ä¿å­˜åï¼Œç³»ç»Ÿä¼šç”Ÿæˆå¯†é’¥å¹¶æ˜¾ç¤ºå®Œæ•´çš„APIå¯†é’¥ï¼ˆä»…æ˜¾ç¤ºä¸€æ¬¡ï¼‰</li>
          <li>è®°å½•ä¸‹App IDï¼ˆå¦‚ï¼šapp_1234567890ï¼‰å’ŒAPIå¯†é’¥ï¼ˆå¦‚ï¼šsk_test_abcdef123456ï¼‰</li>
          <li>åœ¨å®¢æˆ·ç«¯ä¸­ä½¿ç”¨æ ¼å¼ï¼š<code>Authorization: Bearer app_id:api_key</code></li>
        </ol>
      </div>
    </el-card>

    <el-card class="docs-card">
      <template #header>
        <div class="card-header">
          <h2>å®¢æˆ·ç«¯API - æ›´æ–°æ£€æŸ¥</h2>
        </div>
      </template>

      <el-collapse v-model="activeClientSections">
        <!-- æ£€æŸ¥æ›´æ–° API -->
        <el-collapse-item title="æ£€æŸ¥æ›´æ–°" name="check-update">
          <div class="api-section">
            <div class="api-header">
              <span class="method post">POST</span>
              <code class="endpoint">/api/v1/check-update</code>
              <span class="description">æ£€æŸ¥æ˜¯å¦æœ‰æ–°ç‰ˆæœ¬å¯ç”¨</span>
            </div>
            
            <h4>æƒé™è¦æ±‚</h4>
            <p><code>check_update</code> - åœ¨åˆ›å»ºAPIå¯†é’¥æ—¶éœ€è¦å‹¾é€‰æ­¤æƒé™</p>
            
            <div class="warning-note">
              <h4>âš ï¸ é‡è¦æé†’</h4>
              <p><strong>app_idå‚æ•°æ˜¯å¿…é¡»çš„ï¼</strong>æ­¤å‚æ•°ç”¨äºæ ‡è¯†åº”ç”¨èº«ä»½ï¼Œç¡®ä¿åªèƒ½è®¿é—®å¯¹åº”åº”ç”¨çš„ç‰ˆæœ¬ä¿¡æ¯ã€‚è¯·ç¡®ä¿è¯·æ±‚ä¸­åŒ…å«æ­£ç¡®çš„app_idã€‚</p>
            </div>
            
            <h4>è¯·æ±‚å‚æ•°</h4>
            <el-table :data="checkUpdateParams" class="params-table">
              <el-table-column prop="name" label="å‚æ•°å" width="180" />
              <el-table-column prop="type" label="ç±»å‹" width="100" />
              <el-table-column prop="required" label="å¿…é¡»" width="80">
                <template #default="{ row }">
                  <el-tag :type="row.required ? 'danger' : 'info'" size="small">
                    {{ row.required ? 'æ˜¯' : 'å¦' }}
                  </el-tag>
                </template>
              </el-table-column>
              <el-table-column prop="description" label="è¯´æ˜" />
            </el-table>

            <h4>è¯·æ±‚ç¤ºä¾‹</h4>
            <el-card class="code-card">
              <pre><code>{{ checkUpdateExample }}</code></pre>
            </el-card>

            <h4>å“åº”ç¤ºä¾‹</h4>
            <el-card class="code-card">
              <pre><code>{{ checkUpdateResponse }}</code></pre>
            </el-card>
          </div>
        </el-collapse-item>

        <!-- ä¸‹è½½å¼€å§‹ API -->
        <el-collapse-item title="ä¸‹è½½å¼€å§‹é€šçŸ¥" name="download-started">
          <div class="api-section">
            <div class="api-header">
              <span class="method post">POST</span>
              <code class="endpoint">/api/v1/download-started</code>
              <span class="description">é€šçŸ¥æœåŠ¡å™¨å¼€å§‹ä¸‹è½½æ›´æ–°</span>
            </div>
            
            <h4>æƒé™è¦æ±‚</h4>
            <p><code>download</code> - ç”¨äºç»Ÿè®¡ä¸‹è½½æ¬¡æ•°</p>
            
            <h4>è¯·æ±‚å‚æ•°</h4>
            <el-table :data="downloadStartedParams" class="params-table">
              <el-table-column prop="name" label="å‚æ•°å" width="180" />
              <el-table-column prop="type" label="ç±»å‹" width="100" />
              <el-table-column prop="required" label="å¿…é¡»" width="80">
                <template #default="{ row }">
                  <el-tag :type="row.required ? 'danger' : 'info'" size="small">
                    {{ row.required ? 'æ˜¯' : 'å¦' }}
                  </el-tag>
                </template>
              </el-table-column>
              <el-table-column prop="description" label="è¯´æ˜" />
            </el-table>

            <h4>è¯·æ±‚ç¤ºä¾‹</h4>
            <el-card class="code-card">
              <pre><code>{{ downloadStartedExample }}</code></pre>
            </el-card>
          </div>
        </el-collapse-item>

        <!-- å®‰è£…ç»“æœ API -->
        <el-collapse-item title="å®‰è£…ç»“æœæŠ¥å‘Š" name="install-result">
          <div class="api-section">
            <div class="api-header">
              <span class="method post">POST</span>
              <code class="endpoint">/api/v1/install-result</code>
              <span class="description">æŠ¥å‘Šæ›´æ–°å®‰è£…ç»“æœ</span>
            </div>
            
            <h4>æƒé™è¦æ±‚</h4>
            <p><code>install</code> - ç”¨äºç»Ÿè®¡å®‰è£…æˆåŠŸç‡</p>
            
            <h4>è¯·æ±‚å‚æ•°</h4>
            <el-table :data="installResultParams" class="params-table">
              <el-table-column prop="name" label="å‚æ•°å" width="180" />
              <el-table-column prop="type" label="ç±»å‹" width="100" />
              <el-table-column prop="required" label="å¿…é¡»" width="80">
                <template #default="{ row }">
                  <el-tag :type="row.required ? 'danger' : 'info'" size="small">
                    {{ row.required ? 'æ˜¯' : 'å¦' }}
                  </el-tag>
                </template>
              </el-table-column>
              <el-table-column prop="description" label="è¯´æ˜" />
            </el-table>

            <h4>è¯·æ±‚ç¤ºä¾‹</h4>
            <el-card class="code-card">
              <pre><code>{{ installResultExample }}</code></pre>
            </el-card>
          </div>
        </el-collapse-item>

        <!-- ç‰ˆæœ¬åˆ—è¡¨ API -->
        <el-collapse-item title="è·å–ç‰ˆæœ¬åˆ—è¡¨" name="get-versions">
          <div class="api-section">
            <div class="api-header">
              <span class="method get">GET</span>
              <code class="endpoint">/api/v1/versions</code>
              <span class="description">è·å–åº”ç”¨çš„ç‰ˆæœ¬å†å²åˆ—è¡¨</span>
            </div>
            
            <h4>æƒé™è¦æ±‚</h4>
            <p><code>check_update</code> - å¤ç”¨æ›´æ–°æ£€æŸ¥æƒé™</p>
            
            <div class="warning-note">
              <h4>ğŸ¯ åº”ç”¨åœºæ™¯</h4>
              <p>æ­¤æ¥å£é€‚ç”¨äºï¼šç‰ˆæœ¬å›é€€ã€å†å²å±•ç¤ºã€çµæ´»æ›´æ–°ç­–ç•¥ã€å¼€å‘è°ƒè¯•ç­‰åœºæ™¯ã€‚è®©å®¢æˆ·ç«¯æœ‰æ›´å¤šç‰ˆæœ¬é€‰æ‹©æƒã€‚</p>
            </div>
            
            <h4>æŸ¥è¯¢å‚æ•°</h4>
            <el-table :data="getVersionsParams" class="params-table">
              <el-table-column prop="name" label="å‚æ•°å" width="180" />
              <el-table-column prop="type" label="ç±»å‹" width="100" />
              <el-table-column prop="required" label="å¿…é¡»" width="80">
                <template #default="{ row }">
                  <el-tag :type="row.required ? 'danger' : 'info'" size="small">
                    {{ row.required ? 'æ˜¯' : 'å¦' }}
                  </el-tag>
                </template>
              </el-table-column>
              <el-table-column prop="description" label="è¯´æ˜" />
            </el-table>

            <h4>è¯·æ±‚ç¤ºä¾‹</h4>
            <el-card class="code-card">
              <pre><code>{{ getVersionsExample }}</code></pre>
            </el-card>

            <h4>å“åº”ç¤ºä¾‹</h4>
            <el-card class="code-card">
              <pre><code>{{ getVersionsResponse }}</code></pre>
            </el-card>
          </div>
        </el-collapse-item>
      </el-collapse>
    </el-card>

    <el-card class="docs-card">
      <template #header>
        <div class="card-header">
          <h2>ç®¡ç†ç«¯API</h2>
        </div>
      </template>

      <el-collapse v-model="activeAdminSections">
        <!-- ç‰ˆæœ¬ç®¡ç† -->
        <el-collapse-item title="ç‰ˆæœ¬ç®¡ç†" name="versions">
          <div class="api-section">
            <h4>ğŸ“‹ è·å–ç‰ˆæœ¬åˆ—è¡¨</h4>
            <div class="admin-api-item">
              <div class="api-header">
                <span class="method get">GET</span>
                <code class="endpoint">/admin/api/v1/versions</code>
              </div>
              <p><strong>æŸ¥è¯¢å‚æ•°:</strong> <code>channel</code>, <code>page</code>, <code>limit</code></p>
            </div>

            <h4>â• åˆ›å»ºæ–°ç‰ˆæœ¬</h4>
            <div class="admin-api-item">
              <div class="api-header">
                <span class="method post">POST</span>
                <code class="endpoint">/admin/api/v1/versions</code>
              </div>
              <p><strong>è¯·æ±‚ä½“:</strong> JSONæ ¼å¼çš„ç‰ˆæœ¬ä¿¡æ¯</p>
            </div>

            <h4>ğŸ“¤ ä¸Šä¼ ç‰ˆæœ¬æ–‡ä»¶</h4>
            <div class="admin-api-item">
              <div class="api-header">
                <span class="method post">POST</span>
                <code class="endpoint">/admin/api/v1/applications/:id/versions/upload</code>
                <span class="description">ä¸ºæŒ‡å®šåº”ç”¨ä¸Šä¼ ç‰ˆæœ¬æ–‡ä»¶</span>
              </div>
              <p><strong>è·¯å¾„å‚æ•°:</strong> <code>id</code> - åº”ç”¨ID</p>
              <p><strong>å†…å®¹ç±»å‹:</strong> multipart/form-data</p>
              <p><strong>æ–‡ä»¶å­—æ®µ:</strong> <code>file</code> (æœ€å¤§500MB)</p>
              <p><strong>è¡¨å•å­—æ®µ:</strong> version, channel, title, description, release_notes, etc.</p>
              <p><strong>æ”¯æŒæ ¼å¼:</strong> .zip, .exe, .dmg, .pkg, .deb, .rpm, .tar.gz, .msi</p>
            </div>

            <h4>ğŸ“ æ›´æ–°ç‰ˆæœ¬</h4>
            <div class="admin-api-item">
              <div class="api-header">
                <span class="method put">PUT</span>
                <code class="endpoint">/admin/api/v1/versions/:id</code>
              </div>
            </div>

            <h4>ğŸ“ æ›´æ–°ç‰ˆæœ¬ï¼ˆå«æ–‡ä»¶ï¼‰</h4>
            <div class="admin-api-item">
              <div class="api-header">
                <span class="method put">PUT</span>
                <code class="endpoint">/admin/api/v1/applications/:id/versions/:version_id/upload</code>
                <span class="description">ä¸ºæŒ‡å®šåº”ç”¨æ›´æ–°ç‰ˆæœ¬å’Œæ–‡ä»¶</span>
              </div>
              <p><strong>è·¯å¾„å‚æ•°:</strong> <code>id</code> - åº”ç”¨ID, <code>version_id</code> - ç‰ˆæœ¬ID</p>
            </div>

            <h4>ğŸš€ å‘å¸ƒç‰ˆæœ¬</h4>
            <div class="admin-api-item">
              <div class="api-header">
                <span class="method post">POST</span>
                <code class="endpoint">/admin/api/v1/versions/:id/publish</code>
              </div>
            </div>

            <h4>â¸ï¸ å–æ¶ˆå‘å¸ƒ</h4>
            <div class="admin-api-item">
              <div class="api-header">
                <span class="method post">POST</span>
                <code class="endpoint">/admin/api/v1/versions/:id/unpublish</code>
              </div>
            </div>

            <h4>ğŸ—‘ï¸ åˆ é™¤ç‰ˆæœ¬</h4>
            <div class="admin-api-item">
              <div class="api-header">
                <span class="method delete">DELETE</span>
                <code class="endpoint">/admin/api/v1/versions/:id</code>
              </div>
            </div>
          </div>
        </el-collapse-item>

        <!-- åº”ç”¨ç®¡ç† -->
        <el-collapse-item title="åº”ç”¨ç®¡ç†" name="applications">
          <div class="api-section">
            <h4>ğŸ“‹ è·å–åº”ç”¨åˆ—è¡¨</h4>
            <div class="admin-api-item">
              <div class="api-header">
                <span class="method get">GET</span>
                <code class="endpoint">/admin/api/v1/applications</code>
              </div>
            </div>

            <h4>â• åˆ›å»ºåº”ç”¨</h4>
            <div class="admin-api-item">
              <div class="api-header">
                <span class="method post">POST</span>
                <code class="endpoint">/admin/api/v1/applications</code>
              </div>
            </div>

            <h4>ğŸ”‘ è·å–APIå¯†é’¥</h4>
            <div class="admin-api-item">
              <div class="api-header">
                <span class="method get">GET</span>
                <code class="endpoint">/admin/api/v1/applications/:id/keys</code>
              </div>
            </div>

            <h4>ğŸ”‘ åˆ›å»ºAPIå¯†é’¥</h4>
            <div class="admin-api-item">
              <div class="api-header">
                <span class="method post">POST</span>
                <code class="endpoint">/admin/api/v1/applications/:id/keys</code>
              </div>
            </div>
          </div>
        </el-collapse-item>

        <!-- é€šé“ç®¡ç† -->
        <el-collapse-item title="é€šé“ç®¡ç†" name="channels">
          <div class="api-section">
            <h4>ğŸ“‹ è·å–é€šé“åˆ—è¡¨</h4>
            <div class="admin-api-item">
              <div class="api-header">
                <span class="method get">GET</span>
                <code class="endpoint">/admin/api/v1/channels</code>
              </div>
            </div>

            <h4>â• åˆ›å»ºé€šé“</h4>
            <div class="admin-api-item">
              <div class="api-header">
                <span class="method post">POST</span>
                <code class="endpoint">/admin/api/v1/channels</code>
              </div>
            </div>

            <h4>ğŸ“ æ›´æ–°é€šé“</h4>
            <div class="admin-api-item">
              <div class="api-header">
                <span class="method put">PUT</span>
                <code class="endpoint">/admin/api/v1/channels/:id</code>
              </div>
            </div>
          </div>
        </el-collapse-item>

        <!-- ç»Ÿè®¡åˆ†æ -->
        <el-collapse-item title="ç»Ÿè®¡åˆ†æ" name="stats">
          <div class="api-section">
            <h4>ğŸ“Š è·å–ç»Ÿè®¡æ•°æ®</h4>
            <div class="admin-api-item">
              <div class="api-header">
                <span class="method get">GET</span>
                <code class="endpoint">/admin/api/v1/stats</code>
              </div>
            </div>

            <h4>ğŸ“ˆ ç‰ˆæœ¬åˆ†å¸ƒç»Ÿè®¡</h4>
            <div class="admin-api-item">
              <div class="api-header">
                <span class="method get">GET</span>
                <code class="endpoint">/admin/api/v1/stats/distribution</code>
              </div>
            </div>

            <h4>ğŸŒ åœ°åŒºåˆ†å¸ƒç»Ÿè®¡</h4>
            <div class="admin-api-item">
              <div class="api-header">
                <span class="method get">GET</span>
                <code class="endpoint">/admin/api/v1/stats/regions</code>
              </div>
            </div>
          </div>
        </el-collapse-item>
      </el-collapse>
    </el-card>

    <el-card class="docs-card">
      <template #header>
        <div class="card-header">
          <h2>SDK é›†æˆç¤ºä¾‹</h2>
        </div>
      </template>

      <el-tabs v-model="activeSDKTab" type="card">
        <el-tab-pane label="JavaScript" name="javascript">
          <el-card class="code-card">
            <pre><code>{{ javascriptSDK }}</code></pre>
          </el-card>
        </el-tab-pane>
        
        <el-tab-pane label="Python" name="python">
          <el-card class="code-card">
            <pre><code>{{ pythonSDK }}</code></pre>
          </el-card>
        </el-tab-pane>
        
        <el-tab-pane label="Go" name="go">
          <el-card class="code-card">
            <pre><code>{{ goSDK }}</code></pre>
          </el-card>
        </el-tab-pane>

        <el-tab-pane label="cURL" name="curl">
          <el-card class="code-card">
            <pre><code>{{ curlExample }}</code></pre>
          </el-card>
        </el-tab-pane>
      </el-tabs>
    </el-card>

    <el-card class="docs-card">
      <template #header>
        <div class="card-header">
          <h2>é”™è¯¯ç å‚è€ƒ</h2>
        </div>
      </template>

      <el-table :data="errorCodes" class="error-table">
        <el-table-column prop="code" label="çŠ¶æ€ç " width="100" />
        <el-table-column prop="message" label="é”™è¯¯ä¿¡æ¯" width="200" />
        <el-table-column prop="description" label="è¯´æ˜" />
        <el-table-column prop="solution" label="è§£å†³æ–¹æ¡ˆ" />
      </el-table>
    </el-card>

    <el-card class="docs-card">
      <template #header>
        <div class="card-header">
          <h2>æœ€ä½³å®è·µ</h2>
        </div>
      </template>

      <el-collapse v-model="activeBestPractices">
        <el-collapse-item title="ğŸ• æ›´æ–°æ£€æŸ¥é¢‘ç‡" name="check-frequency">
          <ul>
            <li><strong>æ¨èé¢‘ç‡ï¼š</strong>åº”ç”¨å¯åŠ¨æ—¶æ£€æŸ¥ä¸€æ¬¡ï¼Œé¿å…é¢‘ç¹è¯·æ±‚</li>
            <li><strong>åå°æ£€æŸ¥ï¼š</strong>å¯ä»¥è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼ˆå¦‚æ¯æ—¥æˆ–æ¯å‘¨æ£€æŸ¥ä¸€æ¬¡ï¼‰</li>
            <li><strong>ç”¨æˆ·è§¦å‘ï¼š</strong>æä¾›æ‰‹åŠ¨æ£€æŸ¥æ›´æ–°çš„åŠŸèƒ½</li>
            <li><strong>é”™è¯¯é‡è¯•ï¼š</strong>ç½‘ç»œé”™è¯¯æ—¶å®æ–½æŒ‡æ•°é€€é¿é‡è¯•ç­–ç•¥</li>
          </ul>
        </el-collapse-item>

        <el-collapse-item title="ğŸ·ï¸ ç‰ˆæœ¬å·ç®¡ç†" name="version-naming">
          <ul>
            <li><strong>è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼š</strong>æ¨èä½¿ç”¨ v1.2.3 æ ¼å¼</li>
            <li><strong>ä¸»ç‰ˆæœ¬å·ï¼š</strong>ä¸å…¼å®¹çš„APIä¿®æ”¹</li>
            <li><strong>æ¬¡ç‰ˆæœ¬å·ï¼š</strong>å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢</li>
            <li><strong>ä¿®è®¢å·ï¼š</strong>å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£</li>
            <li><strong>é¢„å‘å¸ƒï¼š</strong>ä½¿ç”¨ v1.2.3-beta.1 æ ¼å¼</li>
          </ul>
        </el-collapse-item>

        <el-collapse-item title="ğŸ“ æ–‡ä»¶ç®¡ç†" name="file-management">
          <ul>
            <li><strong>æ–‡ä»¶å¤§å°ï¼š</strong>å•ä¸ªæ–‡ä»¶æœ€å¤§500MBï¼Œå»ºè®®å‹ç¼©åä¸Šä¼ </li>
            <li><strong>æ–‡ä»¶å‘½åï¼š</strong>ä½¿ç”¨æ¸…æ™°çš„å‘½åè§„åˆ™ï¼ŒåŒ…å«ç‰ˆæœ¬å·</li>
            <li><strong>æ–‡ä»¶æ ¡éªŒï¼š</strong>ç³»ç»Ÿè‡ªåŠ¨è®¡ç®—SHA256æ ¡éªŒå’Œ</li>
            <li><strong>å¢é‡æ›´æ–°ï¼š</strong>è€ƒè™‘å®æ–½å¢é‡æ›´æ–°å‡å°‘ä¸‹è½½é‡</li>
          </ul>
        </el-collapse-item>

        <el-collapse-item title="âš¡ æ€§èƒ½ä¼˜åŒ–" name="performance">
          <ul>
            <li><strong>CDNåŠ é€Ÿï¼š</strong>ä½¿ç”¨CDNåˆ†å‘æ›´æ–°æ–‡ä»¶</li>
            <li><strong>å¹¶å‘æ§åˆ¶ï¼š</strong>é™åˆ¶åŒæ—¶ä¸‹è½½çš„æ–‡ä»¶æ•°é‡</li>
            <li><strong>æ–­ç‚¹ç»­ä¼ ï¼š</strong>æ”¯æŒå¤§æ–‡ä»¶æ–­ç‚¹ç»­ä¼ </li>
            <li><strong>ç¼“å­˜ç­–ç•¥ï¼š</strong>åˆç†è®¾ç½®HTTPç¼“å­˜å¤´</li>
          </ul>
        </el-collapse-item>

        <el-collapse-item title="ğŸ”’ å®‰å…¨è€ƒè™‘" name="security">
          <ul>
            <li><strong>APIå¯†é’¥ä¿æŠ¤ï¼š</strong>ä¸è¦åœ¨å®¢æˆ·ç«¯ç¡¬ç¼–ç APIå¯†é’¥</li>
            <li><strong>æƒé™æœ€å°åŒ–ï¼š</strong>APIå¯†é’¥åªåˆ†é…å¿…è¦çš„æƒé™</li>
            <li><strong>æ–‡ä»¶ç­¾åï¼š</strong>éªŒè¯ä¸‹è½½æ–‡ä»¶çš„æ•°å­—ç­¾å</li>
            <li><strong>HTTPSä¼ è¾“ï¼š</strong>å§‹ç»ˆä½¿ç”¨HTTPSä¼ è¾“æ•æ„Ÿæ•°æ®</li>
          </ul>
        </el-collapse-item>
      </el-collapse>
    </el-card>
  </div>
</template>

<script setup>
import { ref, computed } from 'vue'
import { useI18n } from 'vue-i18n'

const { t } = useI18n()
const activeClientSections = ref(['check-update'])
const activeAdminSections = ref(['versions'])
const activeSDKTab = ref('javascript')
const activeBestPractices = ref(['check-frequency'])

// API åŸºç¡€åœ°å€
const clientApiBaseUrl = computed(() => {
  return `${window.location.protocol}//${window.location.host}/api/v1`
})

const adminApiBaseUrl = computed(() => {
  return `${window.location.protocol}//${window.location.host}/admin/api/v1`
})

// æ£€æŸ¥æ›´æ–°APIå‚æ•° (ä¿®æ­£åçš„å‚æ•°)
const checkUpdateParams = [
  { name: 'app_id', type: 'string', required: true, description: 'åº”ç”¨IDï¼Œä»ç®¡ç†åå°è·å–ï¼Œå¦‚ "app_1234567890"' },
  { name: 'current_version', type: 'string', required: true, description: 'å½“å‰ç‰ˆæœ¬å·ï¼Œå¦‚ "v1.2.3"' },
  { name: 'channel', type: 'string', required: true, description: 'æ›´æ–°é€šé“ï¼šstable, beta, alpha' },
  { name: 'client_id', type: 'string', required: true, description: 'å®¢æˆ·ç«¯å”¯ä¸€æ ‡è¯†ï¼Œç”¨äºç»Ÿè®¡' },
  { name: 'region', type: 'string', required: false, description: 'åœ°åŒºä»£ç ï¼Œå¦‚ "CN", "US"' },
  { name: 'arch', type: 'string', required: false, description: 'ç³»ç»Ÿæ¶æ„ï¼Œå¦‚ "x64", "arm64"' },
  { name: 'os', type: 'string', required: false, description: 'æ“ä½œç³»ç»Ÿï¼Œå¦‚ "windows", "macos", "linux"' }
]

// ä¸‹è½½å¼€å§‹APIå‚æ•° (ä¿®æ­£åçš„å‚æ•°)
const downloadStartedParams = [
  { name: 'version', type: 'string', required: true, description: 'ä¸‹è½½çš„ç‰ˆæœ¬å·' },
  { name: 'client_id', type: 'string', required: true, description: 'å®¢æˆ·ç«¯å”¯ä¸€æ ‡è¯†' }
]

// å®‰è£…ç»“æœAPIå‚æ•° (ä¿®æ­£åçš„å‚æ•°)
const installResultParams = [
  { name: 'version', type: 'string', required: true, description: 'å®‰è£…çš„ç‰ˆæœ¬å·' },
  { name: 'client_id', type: 'string', required: true, description: 'å®¢æˆ·ç«¯å”¯ä¸€æ ‡è¯†' },
  { name: 'success', type: 'boolean', required: true, description: 'å®‰è£…æ˜¯å¦æˆåŠŸ' },
  { name: 'error_message', type: 'string', required: false, description: 'é”™è¯¯ä¿¡æ¯ï¼ˆå½“successä¸ºfalseæ—¶ï¼‰' }
]

// è·å–ç‰ˆæœ¬åˆ—è¡¨APIå‚æ•°
const getVersionsParams = [
  { name: 'channel', type: 'string', required: false, description: 'é€šé“è¿‡æ»¤ï¼šstable, beta, alphaã€‚ä¸æŒ‡å®šåˆ™è¿”å›æ‰€æœ‰é€šé“' },
  { name: 'limit', type: 'number', required: false, description: 'è¿”å›æ•°é‡é™åˆ¶ï¼Œé»˜è®¤10ï¼Œæœ€å¤§50' },
  { name: 'published_only', type: 'boolean', required: false, description: 'åªè¿”å›å·²å‘å¸ƒç‰ˆæœ¬ï¼Œé»˜è®¤true' }
]

// APIç¤ºä¾‹ (ä¿®æ­£åçš„ç¤ºä¾‹)
const checkUpdateExample = `curl -X POST "${window.location.protocol}//${window.location.host}/api/v1/check-update" \\
  -H "Authorization: Bearer app_1234567890:sk_test_abcdef123456" \\
  -H "Content-Type: application/json" \\
  -d '{
    "app_id": "app_1234567890",
    "current_version": "v1.2.3",
    "channel": "stable",
    "client_id": "client_unique_id_12345",
    "region": "CN",
    "arch": "x64",
    "os": "windows"
  }'`

const checkUpdateResponse = `{
  "code": 200,
  "message": "success",
  "data": {
    "has_update": true,
    "latest_version": "v1.3.0",
    "download_url": "${window.location.protocol}//${window.location.host}/uploads/versions/app_v1.3.0.zip",
    "file_size": 52428800,
    "file_checksum": "sha256:abc123def456...",
    "is_forced": false,
    "title": "ç‰ˆæœ¬ v1.3.0",
    "description": "ä¿®å¤å·²çŸ¥é—®é¢˜ï¼Œæå‡æ€§èƒ½",
    "release_notes": "æ–°å¢åŠŸèƒ½:\\n- æ”¯æŒè‡ªåŠ¨æ›´æ–°\\n- ä¿®å¤å·²çŸ¥é—®é¢˜",
    "min_upgrade_version": "v1.0.0"
  }
}`

const downloadStartedExample = `curl -X POST "${window.location.protocol}//${window.location.host}/api/v1/download-started" \\
  -H "Authorization: Bearer app_1234567890:sk_test_abcdef123456" \\
  -H "Content-Type: application/json" \\
  -d '{
    "version": "v1.3.0",
    "client_id": "client_unique_id_12345"
  }'`

const installResultExample = `curl -X POST "${window.location.protocol}//${window.location.host}/api/v1/install-result" \\
  -H "Authorization: Bearer app_1234567890:sk_test_abcdef123456" \\
  -H "Content-Type: application/json" \\
  -d '{
    "version": "v1.3.0",
    "client_id": "client_unique_id_12345",
    "success": true
  }'`

const getVersionsExample = `# è·å–æ‰€æœ‰å·²å‘å¸ƒç‰ˆæœ¬ï¼ˆé»˜è®¤ï¼‰
curl -X GET "${window.location.protocol}//${window.location.host}/api/v1/versions" \\
  -H "Authorization: Bearer app_1234567890:sk_test_abcdef123456"

# è·å–stableé€šé“çš„æœ€è¿‘5ä¸ªç‰ˆæœ¬
curl -X GET "${window.location.protocol}//${window.location.host}/api/v1/versions?channel=stable&limit=5" \\
  -H "Authorization: Bearer app_1234567890:sk_test_abcdef123456"

# è·å–æ‰€æœ‰ç‰ˆæœ¬ï¼ˆåŒ…æ‹¬æœªå‘å¸ƒï¼‰
curl -X GET "${window.location.protocol}//${window.location.host}/api/v1/versions?published_only=false&limit=20" \\
  -H "Authorization: Bearer app_1234567890:sk_test_abcdef123456"`

const getVersionsResponse = `{
  "code": 200,
  "message": "success",
  "data": [
    {
      "version": "v1.3.0",
      "channel": "stable",
      "title": "ç¨³å®šç‰ˆæœ¬ v1.3.0",
      "description": "ä¿®å¤é‡è¦é—®é¢˜ï¼Œæå‡æ€§èƒ½",
      "release_notes": "æ–°å¢åŠŸèƒ½:\\n- æ”¯æŒè‡ªåŠ¨æ›´æ–°\\n- ä¿®å¤å·²çŸ¥é—®é¢˜\\n- æ€§èƒ½ä¼˜åŒ–",
      "download_url": "${window.location.protocol}//${window.location.host}/uploads/versions/app_v1.3.0.zip",
      "file_size": 52428800,
      "file_checksum": "sha256:abc123def456...",
      "is_forced": false,
      "min_upgrade_version": "v1.0.0",
      "published_at": "2024-01-15T10:30:00Z"
    },
    {
      "version": "v1.2.5",
      "channel": "stable",
      "title": "ç¨³å®šç‰ˆæœ¬ v1.2.5",
      "description": "å®‰å…¨æ›´æ–°å’Œbugä¿®å¤",
      "release_notes": "ä¿®å¤:\\n- å®‰å…¨æ¼æ´ä¿®å¤\\n- ç¨³å®šæ€§æå‡",
      "download_url": "${window.location.protocol}//${window.location.host}/uploads/versions/app_v1.2.5.zip",
      "file_size": 51200000,
      "file_checksum": "sha256:def789abc123...",
      "is_forced": false,
      "min_upgrade_version": "v1.0.0",
      "published_at": "2024-01-10T14:20:00Z"
    }
  ]
}`

// SDK ç¤ºä¾‹
const javascriptSDK = `// VerTree JavaScript SDK ç¤ºä¾‹
class VerTreeClient {
  constructor(appId, apiKey, baseUrl = '${window.location.protocol}//${window.location.host}/api/v1') {
    this.appId = appId;
    this.apiKey = apiKey;
    this.baseUrl = baseUrl;
    this.authHeader = \`Bearer \${appId}:\${apiKey}\`;
  }

  async checkUpdate(currentVersion, channel = 'stable', options = {}) {
    const response = await fetch(\`\${this.baseUrl}/check-update\`, {
      method: 'POST',
      headers: {
        'Authorization': this.authHeader,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        app_id: this.appId,
        current_version: currentVersion,
        channel: channel,
        client_id: options.clientId || this.generateClientId(),
        region: options.region,
        arch: options.arch,
        os: options.os
      })
    });
    
    const result = await response.json();
    return result.data;
  }

  async reportDownloadStarted(version, clientId) {
    await fetch(\`\${this.baseUrl}/download-started\`, {
      method: 'POST',
      headers: {
        'Authorization': this.authHeader,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        version: version,
        client_id: clientId
      })
    });
  }

  async reportInstallResult(version, success, errorMessage = null, clientId) {
    await fetch(\`\${this.baseUrl}/install-result\`, {
      method: 'POST',
      headers: {
        'Authorization': this.authHeader,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        version: version,
        client_id: clientId,
        success: success,
        error_message: errorMessage
      })
    });
  }

  async getVersions(options = {}) {
    const params = new URLSearchParams();
    if (options.channel) params.append('channel', options.channel);
    if (options.limit) params.append('limit', options.limit.toString());
    if (options.publishedOnly !== undefined) params.append('published_only', options.publishedOnly.toString());
    
    const url = \`\${this.baseUrl}/versions\` + (params.toString() ? \`?\${params.toString()}\` : '');
    
    const response = await fetch(url, {
      method: 'GET',
      headers: {
        'Authorization': this.authHeader
      }
    });
    
    const result = await response.json();
    return result.data;
  }

  generateClientId() {
    return 'client_' + Math.random().toString(36).substr(2, 9);
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const client = new VerTreeClient('app_1234567890', 'sk_test_abcdef123456');

async function checkForUpdates() {
  try {
    const clientId = client.generateClientId();
    const updateInfo = await client.checkUpdate('v1.2.3', 'stable', {
      clientId: clientId,
      region: 'CN',
      os: 'windows'
    });
    
    if (updateInfo.has_update) {
      console.log('æœ‰æ–°ç‰ˆæœ¬å¯ç”¨:', updateInfo.latest_version);
      
      // å¼€å§‹ä¸‹è½½
      await client.reportDownloadStarted(updateInfo.latest_version, clientId);
      
      // æ¨¡æ‹Ÿä¸‹è½½å’Œå®‰è£…è¿‡ç¨‹...
      
      // æŠ¥å‘Šå®‰è£…ç»“æœ
      await client.reportInstallResult(updateInfo.latest_version, true, null, clientId);
    }
  } catch (error) {
    console.error('æ£€æŸ¥æ›´æ–°å¤±è´¥:', error);
  }
}

async function showVersionHistory() {
  try {
    // è·å–stableé€šé“çš„æœ€è¿‘10ä¸ªç‰ˆæœ¬
    const versions = await client.getVersions({
      channel: 'stable',
      limit: 10,
      publishedOnly: true
    });
    
    console.log('ç‰ˆæœ¬å†å²:', versions);
    
    // å±•ç¤ºç‰ˆæœ¬åˆ—è¡¨ä¾›ç”¨æˆ·é€‰æ‹©
    versions.forEach(version => {
      console.log(\`\${version.version} - \${version.title}\`);
      console.log(\`  å‘å¸ƒæ—¶é—´: \${version.published_at}\`);
      console.log(\`  æ–‡ä»¶å¤§å°: \${(version.file_size / 1024 / 1024).toFixed(2)} MB\`);
    });
  } catch (error) {
    console.error('è·å–ç‰ˆæœ¬å†å²å¤±è´¥:', error);
  }
}`

const pythonSDK = `# VerTree Python SDK ç¤ºä¾‹
import requests
import json
import uuid

class VerTreeClient:
    def __init__(self, app_id, api_key, base_url="${window.location.protocol}//${window.location.host}/api/v1"):
        self.app_id = app_id
        self.api_key = api_key
        self.base_url = base_url
        self.headers = {
            'Authorization': f'Bearer {app_id}:{api_key}',
            'Content-Type': 'application/json'
        }
    
    def check_update(self, current_version, channel='stable', client_id=None, **kwargs):
        """æ£€æŸ¥æ›´æ–°"""
        if client_id is None:
            client_id = str(uuid.uuid4())
            
        data = {
            'app_id': self.app_id,
            'current_version': current_version,
            'channel': channel,
            'client_id': client_id,
            **kwargs  # region, arch, os ç­‰å¯é€‰å‚æ•°
        }
        
        response = requests.post(
            f'{self.base_url}/check-update',
            headers=self.headers,
            json=data
        )
        
        result = response.json()
        return result.get('data')
    
    def report_download_started(self, version, client_id):
        """æŠ¥å‘Šä¸‹è½½å¼€å§‹"""
        data = {
            'version': version,
            'client_id': client_id
        }
        
        requests.post(
            f'{self.base_url}/download-started',
            headers=self.headers,
            json=data
        )
    
    def report_install_result(self, version, success, error_message=None, client_id=None):
        """æŠ¥å‘Šå®‰è£…ç»“æœ"""
        data = {
            'version': version,
            'client_id': client_id,
            'success': success,
            'error_message': error_message
        }
        
        requests.post(
            f'{self.base_url}/install-result',
            headers=self.headers,
            json=data
        )

# ä½¿ç”¨ç¤ºä¾‹
client = VerTreeClient('app_1234567890', 'sk_test_abcdef123456')

def check_for_updates():
    try:
        client_id = str(uuid.uuid4())
        update_info = client.check_update(
            'v1.2.3', 
            'stable', 
            client_id=client_id,
            region='CN',
            os='linux'
        )
        
        if update_info and update_info.get('has_update'):
            print(f"æœ‰æ–°ç‰ˆæœ¬å¯ç”¨: {update_info['latest_version']}")
            
            # å¼€å§‹ä¸‹è½½
            client.report_download_started(update_info['latest_version'], client_id)
            
            # æ¨¡æ‹Ÿä¸‹è½½å’Œå®‰è£…è¿‡ç¨‹...
            
            # æŠ¥å‘Šå®‰è£…ç»“æœ
            client.report_install_result(update_info['latest_version'], True, None, client_id)
            
    except Exception as e:
        print(f"æ£€æŸ¥æ›´æ–°å¤±è´¥: {e}")

if __name__ == "__main__":
    check_for_updates()`

const goSDK = `// VerTree Go SDK ç¤ºä¾‹
package main

import (
    "bytes"
    "encoding/json"
    "fmt"
    "net/http"
    "time"
    "github.com/google/uuid"
)

type VerTreeClient struct {
    AppID   string
    APIKey  string
    BaseURL string
    Client  *http.Client
}

type UpdateRequest struct {
    AppID          string \`json:"app_id"\`
    CurrentVersion string \`json:"current_version"\`
    Channel        string \`json:"channel"\`
    ClientID       string \`json:"client_id"\`
    Region         string \`json:"region,omitempty"\`
    Arch           string \`json:"arch,omitempty"\`
    OS             string \`json:"os,omitempty"\`
}

type UpdateResponse struct {
    HasUpdate         bool   \`json:"has_update"\`
    LatestVersion     string \`json:"latest_version"\`
    DownloadURL       string \`json:"download_url"\`
    FileSize          int64  \`json:"file_size"\`
    FileChecksum      string \`json:"file_checksum"\`
    IsForced          bool   \`json:"is_forced"\`
    Title             string \`json:"title"\`
    Description       string \`json:"description"\`
    ReleaseNotes      string \`json:"release_notes"\`
    MinUpgradeVersion string \`json:"min_upgrade_version"\`
}

type APIResponse struct {
    Code    int         \`json:"code"\`
    Message string      \`json:"message"\`
    Data    interface{} \`json:"data"\`
}

func NewVerTreeClient(appID, apiKey string) *VerTreeClient {
    return &VerTreeClient{
        AppID:   appID,
        APIKey:  apiKey,
        BaseURL: "${window.location.protocol}//${window.location.host}/api/v1",
        Client:  &http.Client{Timeout: 30 * time.Second},
    }
}

func (c *VerTreeClient) CheckUpdate(req UpdateRequest) (*UpdateResponse, error) {
    jsonData, err := json.Marshal(req)
    if err != nil {
        return nil, err
    }

    httpReq, err := http.NewRequest("POST", c.BaseURL+"/check-update", bytes.NewBuffer(jsonData))
    if err != nil {
        return nil, err
    }

    httpReq.Header.Set("Authorization", fmt.Sprintf("Bearer %s:%s", c.AppID, c.APIKey))
    httpReq.Header.Set("Content-Type", "application/json")

    resp, err := c.Client.Do(httpReq)
    if err != nil {
        return nil, err
    }
    defer resp.Body.Close()

    var apiResp APIResponse
    err = json.NewDecoder(resp.Body).Decode(&apiResp)
    if err != nil {
        return nil, err
    }

    updateData, _ := json.Marshal(apiResp.Data)
    var updateResp UpdateResponse
    json.Unmarshal(updateData, &updateResp)

    return &updateResp, nil
}

func (c *VerTreeClient) ReportDownloadStarted(version, clientID string) error {
    data := map[string]string{
        "version":   version,
        "client_id": clientID,
    }

    jsonData, _ := json.Marshal(data)

    httpReq, err := http.NewRequest("POST", c.BaseURL+"/download-started", bytes.NewBuffer(jsonData))
    if err != nil {
        return err
    }

    httpReq.Header.Set("Authorization", fmt.Sprintf("Bearer %s:%s", c.AppID, c.APIKey))
    httpReq.Header.Set("Content-Type", "application/json")

    _, err = c.Client.Do(httpReq)
    return err
}

func (c *VerTreeClient) ReportInstallResult(version, clientID string, success bool, errorMessage string) error {
    data := map[string]interface{}{
        "version":       version,
        "client_id":     clientID,
        "success":       success,
        "error_message": errorMessage,
    }

    jsonData, _ := json.Marshal(data)

    httpReq, err := http.NewRequest("POST", c.BaseURL+"/install-result", bytes.NewBuffer(jsonData))
    if err != nil {
        return err
    }

    httpReq.Header.Set("Authorization", fmt.Sprintf("Bearer %s:%s", c.AppID, c.APIKey))
    httpReq.Header.Set("Content-Type", "application/json")

    _, err = c.Client.Do(httpReq)
    return err
}

func main() {
    client := NewVerTreeClient("app_1234567890", "sk_test_abcdef123456")
    clientID := uuid.New().String()

    updateInfo, err := client.CheckUpdate(UpdateRequest{
        AppID:          "app_1234567890",
        CurrentVersion: "v1.2.3",
        Channel:        "stable",
        ClientID:       clientID,
        Region:         "CN",
        OS:             "linux",
    })
    
    if err != nil {
        fmt.Printf("æ£€æŸ¥æ›´æ–°å¤±è´¥: %v\\n", err)
        return
    }

    if updateInfo.HasUpdate {
        fmt.Printf("æœ‰æ–°ç‰ˆæœ¬å¯ç”¨: %s\\n", updateInfo.LatestVersion)

        // æŠ¥å‘Šä¸‹è½½å¼€å§‹
        client.ReportDownloadStarted(updateInfo.LatestVersion, clientID)

        // æ¨¡æ‹Ÿä¸‹è½½å’Œå®‰è£…è¿‡ç¨‹...

        // æŠ¥å‘Šå®‰è£…ç»“æœ
        client.ReportInstallResult(updateInfo.LatestVersion, clientID, true, "")
    }
}`

const curlExample = `# æ£€æŸ¥æ›´æ–°
curl -X POST "${window.location.protocol}//${window.location.host}/api/v1/check-update" \\
  -H "Authorization: Bearer app_1234567890:sk_test_abcdef123456" \\
  -H "Content-Type: application/json" \\
  -d '{
    "app_id": "app_1234567890",
    "current_version": "v1.2.3",
    "channel": "stable",
    "client_id": "client_unique_id_12345",
    "region": "CN",
    "os": "linux"
  }'

# è·å–ç‰ˆæœ¬åˆ—è¡¨
curl -X GET "${window.location.protocol}//${window.location.host}/api/v1/versions?channel=stable&limit=5" \\
  -H "Authorization: Bearer app_1234567890:sk_test_abcdef123456"

# æŠ¥å‘Šä¸‹è½½å¼€å§‹
curl -X POST "${window.location.protocol}//${window.location.host}/api/v1/download-started" \\
  -H "Authorization: Bearer app_1234567890:sk_test_abcdef123456" \\
  -H "Content-Type: application/json" \\
  -d '{
    "version": "v1.3.0",
    "client_id": "client_unique_id_12345"
  }'

# æŠ¥å‘Šå®‰è£…ç»“æœ
curl -X POST "${window.location.protocol}//${window.location.host}/api/v1/install-result" \\
  -H "Authorization: Bearer app_1234567890:sk_test_abcdef123456" \\
  -H "Content-Type: application/json" \\
  -d '{
    "version": "v1.3.0",
    "client_id": "client_unique_id_12345",
    "success": true
  }'

# åˆ›å»ºç‰ˆæœ¬ï¼ˆç®¡ç†APIï¼‰
curl -X POST "${window.location.protocol}//${window.location.host}/admin/api/v1/versions" \\
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \\
  -H "Content-Type: application/json" \\
  -d '{
    "app_id": "app_1234567890",
    "version": "v1.4.0",
    "channel": "stable",
    "title": "æ–°ç‰ˆæœ¬å‘å¸ƒ",
    "description": "ä¿®å¤é‡è¦é—®é¢˜",
    "release_notes": "è¯¦ç»†çš„æ›´æ–°è¯´æ˜...",
    "file_url": "https://releases.example.com/v1.4.0/app.zip",
    "file_size": 52428800,
    "file_checksum": "sha256:abc123...",
    "is_forced": false
  }'

# ä¸Šä¼ ç‰ˆæœ¬æ–‡ä»¶ï¼ˆç®¡ç†APIï¼‰
curl -X POST "${window.location.protocol}//${window.location.host}/admin/api/v1/applications/app_1234567890/versions/upload" \\
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \\
  -F "file=@app_v1.4.0.zip" \\
  -F "version=v1.4.0" \\
  -F "channel=stable" \\
  -F "title=æ–°ç‰ˆæœ¬å‘å¸ƒ" \\
  -F "description=ä¿®å¤é‡è¦é—®é¢˜"`

// é”™è¯¯ç è¡¨
const errorCodes = [
  { code: '200', message: 'OK', description: 'è¯·æ±‚æˆåŠŸ', solution: 'æ­£å¸¸å“åº”' },
  { code: '400', message: 'Bad Request', description: 'è¯·æ±‚å‚æ•°é”™è¯¯', solution: 'æ£€æŸ¥è¯·æ±‚å‚æ•°æ ¼å¼å’Œå¿…é¡»å­—æ®µ' },
  { code: '401', message: 'Unauthorized', description: 'API Key æ— æ•ˆæˆ–ç¼ºå¤±', solution: 'æ£€æŸ¥ Authorization å¤´éƒ¨å’Œ API Key æ ¼å¼' },
  { code: '403', message: 'Forbidden', description: 'API Key æƒé™ä¸è¶³', solution: 'ç¡®è®¤ API Key æ‹¥æœ‰ç›¸åº”æƒé™ï¼ˆcheck_update, download, installï¼‰' },
  { code: '404', message: 'Not Found', description: 'è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨', solution: 'æ£€æŸ¥ API è·¯å¾„å’Œåº”ç”¨ID' },
  { code: '429', message: 'Too Many Requests', description: 'è¯·æ±‚é¢‘ç‡è¿‡é«˜', solution: 'é™ä½è¯·æ±‚é¢‘ç‡ï¼Œå®æ–½é‡è¯•ç­–ç•¥' },
  { code: '500', message: 'Internal Server Error', description: 'æœåŠ¡å™¨å†…éƒ¨é”™è¯¯', solution: 'ç¨åé‡è¯•ï¼Œå¦‚æŒç»­å‡ºç°è¯·è”ç³»æŠ€æœ¯æ”¯æŒ' }
]
</script>

<style scoped>
.api-docs {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

.page-header {
  margin-bottom: 30px;
}

.page-header h1 {
  margin: 0 0 10px 0;
  color: #2c3e50;
}

.page-description {
  color: #7f8c8d;
  font-size: 16px;
  margin: 0;
}

.docs-card {
  margin-bottom: 24px;
}

.card-header {
  display: flex;
  align-items: center;
  gap: 10px;
}

.card-header h2 {
  margin: 0;
  color: #2c3e50;
}

.docs-content h3 {
  color: #34495e;
  margin-top: 24px;
  margin-bottom: 12px;
}

.docs-content ul,
.docs-content ol {
  padding-left: 20px;
}

.docs-content li {
  margin-bottom: 8px;
}

.auth-section {
  margin: 20px 0;
}

.auth-section h4 {
  color: #2c3e50;
  margin: 16px 0 8px 0;
}

.security-note {
  background: #f0f9ff;
  border: 1px solid #0ea5e9;
  border-radius: 8px;
  padding: 16px;
  margin: 20px 0;
}

.security-note h4 {
  color: #0369a1;
  margin: 0 0 8px 0;
}

.warning-note {
  background: #fef3c7;
  border: 1px solid #f59e0b;
  border-radius: 8px;
  padding: 16px;
  margin: 16px 0;
}

.warning-note h4 {
  color: #d97706;
  margin: 0 0 8px 0;
}

.warning-note p {
  margin: 0;
  color: #92400e;
}

.code-card {
  margin: 16px 0;
  background-color: #f8f9fa;
}

.code-card pre {
  margin: 0;
  padding: 16px;
  background: #2d3748;
  color: #e2e8f0;
  border-radius: 6px;
  overflow-x: auto;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 14px;
  line-height: 1.5;
}

.api-section {
  padding: 16px 0;
}

.api-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
  padding: 12px;
  background: #f8f9fa;
  border-radius: 6px;
}

.method {
  padding: 4px 8px;
  border-radius: 4px;
  font-weight: bold;
  font-size: 12px;
  color: white;
  min-width: 60px;
  text-align: center;
}

.method.get {
  background-color: #52c41a;
}

.method.post {
  background-color: #1890ff;
}

.method.put {
  background-color: #faad14;
}

.method.delete {
  background-color: #ff4d4f;
}

.endpoint {
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  background: #e6f7ff;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 14px;
}

.description {
  color: #666;
  font-size: 14px;
}

.params-table {
  margin: 16px 0;
}

.admin-api-item {
  margin-bottom: 16px;
  padding: 12px 0;
  border-bottom: 1px solid #f0f0f0;
}

.admin-api-item:last-child {
  border-bottom: none;
}

.admin-api-item p {
  margin: 8px 0 0 0;
  color: #666;
  font-size: 14px;
}

.error-table {
  margin-top: 16px;
}

.docs-content h4 {
  color: #2c3e50;
  margin: 20px 0 12px 0;
  font-size: 16px;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .api-docs {
    padding: 10px;
  }
  
  .page-header h1 {
    font-size: 24px;
  }
  
  .page-description {
    font-size: 14px;
  }
  
  .api-header {
    flex-direction: column;
    align-items: flex-start;
    gap: 8px;
  }
  
  .method {
    min-width: auto;
  }
  
  .endpoint {
    font-size: 12px;
    word-break: break-all;
  }
  
  .code-card pre {
    font-size: 12px;
    padding: 12px;
  }
}

@media (max-width: 480px) {
  .mobile-hidden {
    display: none;
  }
}
</style>